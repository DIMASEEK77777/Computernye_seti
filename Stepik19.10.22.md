DNS

DNS (Domain Name System) —  это протокол для разрешения доменных имён.
Протокол предназначен для связывания названия доменов с IP-адресами компьютеров, соответствующих этим доменам, а также для получения информации о маршрутизации почты, обслуживающих узлах для протоколов в домене (SRV запись).
Спецификации: RFC 1034, RFC 1035
Протокол DNS использует порт 53.

Характеристики системы DNS в глобальной сети Интернет:
* Распределённость администрирования
* Распределённость хранения информации
* Кеширование информации
* Иерархическая структура
* Резервирование

Механизмы разрешения имён:
* Локальный для каждого компьютера файл hosts.
* Централизованная иерархическая служба имен DNS.

На начальном этапе развития сетей, когда количество узлов в каждой сети было небольшое, достаточно было на каждом компьютере хранить и поддерживать актуальное состояние простого текстового файла, в котором содержался список сетевых узлов данной сети. Список устроен очень просто - в каждой строке текстового файла содержится пара "IP-адрес - имя сетевого узла".

Сразу после установки операционной системы файл hosts создаётся с одной записью 127.0.0.1 localhost.

Местонахождение файла hosts:

В Linux: /etc/hosts

В Windows: %system root%\system32\drivers\etc\hosts (где %system root% обозначает папку, в которой установлена операционная система).

С ростом сетей поддерживать актуальность и точность информации в файле hosts становится все труднее. Для этого надо постоянно обновлять содержимое этого файла на всех узлах сети. Кроме того, такая простая технология не позволяет организовать пространство имен в какую-либо структуру. Поэтому появилась необходимость в централизованной базе данных имен, позволяющей производить преобразование имен в IP-адреса без хранения списка соответствия на каждом компьютере. Такой базой стала DNS (Domain Name System) - система именования доменов, которая начала массовую работу в 1987 году.

С появлением службы DNS актуальность использования файла host совсем не исчезла, в ряде случаев использование этого файла оказывается очень эффективным.

Системный вызов разрешения имён во всех ОС обычно реализован так: сначала проверяется локальный файл hosts, затем идёт обращение в службу имён DNS, прописанную локальных настройках ОС:

В Linux — в файле /etc/resolv.conf

В Windows — настройки адаптера→DNS→DNS серверы и DNS суффиксы.


Служба DNS и пространство имён DNS:

Служба DNS - это иерархическая база данных, сопоставляющая имена сетевых узлов и их сетевых служб IP-адресам узлов. В основе иерархической структуры базы данных DNS лежит доменное пространство имен (domain namespace), основной структурной единицей которого является домен, объединяющий сетевые узлы (хосты), а также поддомены. Процесс поиска в БД службы DNS имени некоего сетевого узла и сопоставления этому имени IP-адреса называется "разрешением имени узла в пространстве имен DNS".

Прямое разрешение имён: преобразование символьных имён в IP-адреса (например, server.com в 10.0.2.5).

Обратное разрешение имён: преобразование IP-адреса в символьное имя (например, 10.0.2.5 в server.com).

Пространство имен DNS - иерархическая древовидная структура, начинающаяся с корня, не имеющего имени и обозначаемого точкой ".". Для обратного разрешения используется специальная зона с заререзвированным именем "in-addr.arpa", при этом имена в домене "in-addr.arpa" образуют иерархию цифр, которые соответствуют IP-адресам.

Формат SOA-записи:

* Primary Name Server: Имя первичного DNS-сервера зоны
* Hostmaster: Контактный адрес лица, ответственного за администрирование файла зоны. Обратите внимание на то, что вместо «@» используется «.»
* Serial number: Серийный номер файла зоны. 32-разрядное целое число, меняющееся при каждом обновлении зоны.
* Refresh: Время (в секундах) ожидания вторичного DNS перед запросом SOA-записи с первичного. По истечении данного времени, вторичный DNS обращается к первичному, для получения копии текущей SOA-записи. Первичный DNS-сервер выполняет этот запрос. Вторичный DNS-сервер сравнивает полученный серийный номер зоны с имеющимся. Если они отличаются, то осуществляется запрос к первичному DNS-серверу на трансфер зоны.
* Retry: Время в секундах, вступает в действие тогда, когда первичный DNS-сервер недоступен. Интервал времени, по истечении которого вторичный DNS должен повторить попытку синхронизировать описание зоны с первичным.
* Expire: Время (в секундах), в течение которого вторичный DNS будет пытаться завершить синхронизацию зоны с первичным. Если это время истечет до того, как синхронизация осуществится, зона на вторичном DNS-сервере истечет, и он перестанет обслуживать запросы об этой зоне.
* Minimum TTL: Минимальное время жизни, применяемое ко всем ресурсным записям зоны. Это значение применяется в ответах на запросы с целью проинформировать остальные серверы, сколько времени они могут хранить данные в кэше.
